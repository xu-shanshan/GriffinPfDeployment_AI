<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OwaMailB2 - Service Detail | Griffin PF Deployment AI</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <link rel="stylesheet" href="../../shared/fluent-ui.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Segoe+UI:wght@400;500;600;700&display=swap');
        body { font-family: 'Segoe UI', system-ui, -apple-system, sans-serif; }
        
        /* Fluent UI v9 Design System */
        :root {
            --colorNeutralForeground1: #242424;
            --colorNeutralForeground2: #424242;
            --colorNeutralForeground3: #616161;
            --colorNeutralBackground1: #ffffff;
            --colorNeutralBackground2: #f5f5f5;
            --colorNeutralBackground3: #f0f0f0;
            --colorBrandBackground: #0f6cbd;
            --colorBrandBackgroundHover: #115ea3;
            --colorBrandForeground1: #0f6cbd;
            --colorNeutralStroke1: #d1d1d1;
            --colorNeutralStroke2: #e0e0e0;
            --borderRadiusSmall: 4px;
            --borderRadiusMedium: 6px;
            --borderRadiusLarge: 8px;
            --shadow2: 0 1px 2px rgba(0,0,0,0.14), 0 0px 2px rgba(0,0,0,0.12);
            --shadow4: 0 2px 4px rgba(0,0,0,0.14), 0 0px 2px rgba(0,0,0,0.12);
        }
        
        .fluent-card {
            background: var(--colorNeutralBackground1);
            border: 1px solid var(--colorNeutralStroke2);
            border-radius: var(--borderRadiusLarge);
            box-shadow: var(--shadow2);
            transition: all 0.1s cubic-bezier(0.33, 0, 0.67, 1);
        }
        
        .fluent-card:hover {
            box-shadow: var(--shadow4);
            border-color: var(--colorNeutralStroke1);
        }
        
        .fluent-nav-item {
            padding: 6px 12px;
            border-radius: var(--borderRadiusSmall);
            color: var(--colorNeutralForeground2);
            text-decoration: none;
            font-weight: 500;
            transition: all 0.1s cubic-bezier(0.33, 0, 0.67, 1);
        }
        
        .fluent-nav-item:hover {
            background: var(--colorNeutralBackground3);
            color: var(--colorNeutralForeground1);
        }
        
        .fluent-nav-item.selected {
            background: #e3f2fd;
            color: var(--colorBrandForeground1);
            font-weight: 600;
        }
        
        .fluent-button {
            border-radius: var(--borderRadiusSmall);
            padding: 5px 12px;
            font-weight: 600;
            font-size: 14px;
            line-height: 20px;
            transition: all 0.1s cubic-bezier(0.33, 0, 0.67, 1);
            border: 1px solid transparent;
            cursor: pointer;
        }
        
        .fluent-button-primary {
            background: var(--colorBrandBackground);
            color: white;
        }
        
        .fluent-button-primary:hover {
            background: var(--colorBrandBackgroundHover);
        }
        
        .fluent-button-subtle {
            background: transparent;
            color: var(--colorNeutralForeground2);
            border: 1px solid var(--colorNeutralStroke1);
        }
        
        .fluent-button-subtle:hover {
            background: var(--colorNeutralBackground3);
            color: var(--colorNeutralForeground1);
        }
        
        .fluent-input, .fluent-select {
            padding: 6px 8px;
            border: 1px solid var(--colorNeutralStroke1);
            border-radius: var(--borderRadiusSmall);
            font-size: 14px;
            line-height: 20px;
            color: var(--colorNeutralForeground1);
            background: var(--colorNeutralBackground1);
            transition: all 0.1s cubic-bezier(0.33, 0, 0.67, 1);
        }
        
        .fluent-input:focus, .fluent-select:focus {
            outline: none;
            border-color: var(--colorBrandForeground1);
            box-shadow: 0 0 0 1px var(--colorBrandForeground1);
        }
        
        .fluent-text-title1 {
            font-size: 28px;
            font-weight: 600;
            line-height: 36px;
            color: var(--colorNeutralForeground1);
        }
        
        .fluent-text-title2 {
            font-size: 20px;
            font-weight: 600;
            line-height: 28px;
            color: var(--colorNeutralForeground1);
        }
        
        .fluent-text-body1 {
            font-size: 14px;
            font-weight: 400;
            line-height: 20px;
            color: var(--colorNeutralForeground2);
        }
        
        .fluent-badge {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            line-height: 16px;
        }
        
        .fluent-badge-neutral {
            background: var(--colorNeutralBackground3);
            color: var(--colorNeutralForeground2);
        }
        
        .fluent-badge-success {
            background: #dff6dd;
            color: #107c10;
        }
        
        .fluent-icon {
            width: 16px;
            height: 16px;
        }
        
        /* Pipeline card styles */
        .pipeline-card {
            transition: all 0.1s cubic-bezier(0.33, 0, 0.67, 1);
        }
        .pipeline-card:hover {
            box-shadow: var(--shadow4);
        }
        .pipeline-card.default-pipeline {
            border-color: var(--colorBrandForeground1);
            background-color: #e3f2fd;
        }
        
        /* Sidebar Styles */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            width: 256px;
            background: var(--colorNeutralBackground1);
            border-right: 1px solid var(--colorNeutralStroke2);
            box-shadow: var(--shadow2);
            transform: translateX(-100%);
            transition: transform 0.3s cubic-bezier(0.33, 0, 0.67, 1);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .sidebar.open {
            transform: translateX(0);
        }
        
        .sidebar-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.4);
            z-index: 999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s cubic-bezier(0.33, 0, 0.67, 1);
        }
        
        .sidebar-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .main-content {
            min-height: 100vh;
            transition: margin-left 0.3s cubic-bezier(0.33, 0, 0.67, 1);
        }
        
        .main-content.sidebar-open {
            margin-left: 256px;
        }
        
        .sidebar-nav-item {
            display: flex;
            align-items: center;
            padding: 8px 16px;
            color: var(--colorNeutralForeground2);
            text-decoration: none;
            border-radius: var(--borderRadiusSmall);
            margin: 2px 8px;
            transition: all 0.1s cubic-bezier(0.33, 0, 0.67, 1);
        }
        
        .sidebar-nav-item:hover {
            background: var(--colorNeutralBackground3);
            color: var(--colorNeutralForeground1);
        }
        
        .sidebar-nav-item.active {
            background: #e3f2fd;
            color: var(--colorBrandForeground1);
            font-weight: 600;
        }
        
        .sidebar-header {
            padding: 16px;
            border-bottom: 1px solid var(--colorNeutralStroke2);
        }
        
        .sidebar-section {
            padding: 16px 0;
            border-bottom: 1px solid var(--colorNeutralStroke2);
        }
        
        .sidebar-section-title {
            padding: 0 16px 8px 16px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            color: var(--colorNeutralForeground3);
        }
        
        /* VE cards specific styles */
        .ve-card {
            cursor: pointer;
            transition: all 0.1s cubic-bezier(0.33,0,0.67,1);
        }
        .ve-card:hover {
            box-shadow: var(--shadow4);
            border-color: var(--colorNeutralStroke1);
        }
        .ve-badge {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
            line-height: 16px;
        }
        .ve-badge-b-type {
            background: #e3f2fd;
            color: var(--colorBrandForeground1);
        }
        .ve-badge-b2-type {
            background: #dff6dd;
            color: #107c10;
        }
        
        @media (min-width: 1024px) {
            .sidebar {
                position: fixed;
                transform: translateX(0);
                height: 100vh;
                top: 0;
            }
            
            .sidebar-overlay {
                display: none;
            }
            
            .main-content {
                margin-left: 256px;
            }
            
            .sidebar-toggle {
                display: none;
            }
        }
        
        @media (max-width: 1023px) {
            .main-content.sidebar-open {
                margin-left: 0;
            }
        }
    </style>
</head>
<body style="background: var(--colorNeutralBackground2); min-height: 100vh;">
    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>
    
    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="flex items-center space-x-3">
                <div class="w-8 h-8 rounded flex items-center justify-center" style="background: var(--colorBrandBackground);">
                    <i data-feather="layers" class="fluent-icon text-white"></i>
                </div>
                <div>
                    <h1 class="text-sm font-semibold" style="color: var(--colorNeutralForeground1);">Griffin PF AI</h1>
                    <p style="font-size: 10px; color: var(--colorNeutralForeground3);">Deployment Platform</p>
                </div>
            </div>
        </div>
        
        <nav class="sidebar-section">
            <div class="sidebar-section-title">Main Navigation</div>
            <a href="dashboard.html" class="sidebar-nav-item">
                <i data-feather="home" class="fluent-icon mr-3"></i>
                Dashboard
            </a>
            <a href="ve-management.html" class="sidebar-nav-item">
                <i data-feather="server" class="fluent-icon mr-3"></i>
                VE Management
            </a>
            <a href="services-management.html" class="sidebar-nav-item active">
                <i data-feather="layers" class="fluent-icon mr-3"></i>
                Services Management
            </a>
            <a href="deployment-history.html" class="sidebar-nav-item">
                <i data-feather="clock" class="fluent-icon mr-3"></i>
                History
            </a>
        </nav>
        
        <div class="sidebar-section">
            <div class="sidebar-section-title">Quick Access</div>
            <a href="ve-detail.html?ve=SovBase" class="sidebar-nav-item">
                <i data-feather="star" class="fluent-icon mr-3" style="color: #faa06b;"></i>
                SovBase
            </a>
            <a href="ve-detail.html?ve=ModelBSov" class="sidebar-nav-item">
                <i data-feather="star" class="fluent-icon mr-3" style="color: #faa06b;"></i>
                ModelBSov
            </a>
            <a href="ve-detail.html?ve=OwaMailB2-SOV" class="sidebar-nav-item">
                <i data-feather="star" class="fluent-icon mr-3" style="color: #faa06b;"></i>
                OwaMailB2-SOV
            </a>
        </div>
        
        <div class="sidebar-section">
            <div class="sidebar-section-title">Account</div>
            <a href="login.html" class="sidebar-nav-item">
                <i data-feather="log-out" class="fluent-icon mr-3"></i>
                Logout
            </a>
        </div>
    </aside>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <!-- Fluent Navigation -->
        <nav class="fluent-card" style="margin: 0; border-radius: 0; border-left: none; border-right: none; border-top: none;">
            <div class="container mx-auto px-6">
                <div class="flex justify-between items-center py-4">
                    <div class="flex items-center space-x-4">
                        <button class="sidebar-toggle lg:hidden fluent-button fluent-button-subtle p-2" onclick="toggleSidebar()">
                            <i data-feather="menu" class="fluent-icon"></i>
                        </button>
                        <div class="flex items-center space-x-3">
                            <div>
                                <h1 class="text-lg font-semibold" style="color: var(--colorNeutralForeground1);">Service Detail</h1>
                                <p class="fluent-text-caption1">Cross Virtual Environment Service Management</p>
                            </div>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div class="w-8 h-8 rounded-full flex items-center justify-center" style="background: var(--colorNeutralBackground3);">
                            <i data-feather="user" class="fluent-icon" style="color: var(--colorNeutralForeground3);"></i>
                        </div>
                        <span class="text-sm" style="color: var(--colorNeutralForeground2);">John Doe</span>
                    </div>
                </div>
            </div>
        </nav>

        <div class="container mx-auto px-6 py-8">
            <!-- Breadcrumb -->
            <nav class="flex items-center space-x-2 text-sm mb-6" style="color: var(--colorNeutralForeground3);">
                <a href="services-management.html" class="hover:text-blue-600 transition-colors" style="color: var(--colorBrandForeground1);">Services Management</a>
                <i data-feather="chevron-right" class="w-4 h-4"></i>
                <span style="color: var(--colorNeutralForeground1); font-weight: 500;" id="serviceName">OwaMailB2</span>
            </nav>

            <!-- Service Header -->
            <div class="fluent-card mb-8">
                <div class="p-8">
                    <div class="flex items-center justify-between mb-6">
                        <div class="flex items-center space-x-4">
                            <div class="w-16 h-16 rounded-xl flex items-center justify-center" id="serviceIcon" style="background: #dff6dd;">
                                <i data-feather="mail" class="w-8 h-8" style="color: #107c10;"></i>
                            </div>
                            <div>
                                <div class="flex items-center space-x-3 mb-1">
                                    <h1 class="fluent-text-title1" id="serviceTitle">OwaMailB2</h1>
                                    <button id="favoriteBtn" onclick="toggleFavorite()" style="color: #faa06b; transition: opacity 0.1s;" class="hover:opacity-80" title="Add to favorites">
                                        <i data-feather="star" class="w-6 h-6"></i>
                                    </button>
                                </div>
                                <p class="fluent-text-body1 mt-1" id="serviceDescription">Outlook Web App Mail Backend Service</p>
                                <div class="flex items-center space-x-4 mt-3">
                                    <span class="fluent-badge fluent-badge-success" id="serviceType">Exchange Service</span>
                                    <span class="text-sm" style="color: var(--colorNeutralForeground3);">Last updated: 2 hours ago</span>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <button onclick="refreshData()" class="fluent-button fluent-button-subtle" title="Refresh data">
                                <i data-feather="refresh-cw" class="fluent-icon inline mr-2"></i>Refresh
                            </button>
                            <button onclick="bulkDeploy()" class="fluent-button fluent-button-primary">
                                <i data-feather="upload" class="fluent-icon inline mr-2"></i>Deploy to All VEs
                            </button>
                        </div>
                    </div>
                    
                    <!-- Service Stats Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                        <div class="text-center p-4 rounded-lg border transition-all" style="border-color: var(--colorNeutralStroke2); background: var(--colorNeutralBackground2);">
                            <p class="text-3xl font-bold mb-2" style="color: var(--colorBrandForeground1);" id="totalVEs">2</p>
                            <p class="text-sm" style="color: var(--colorNeutralForeground2);">Total VE Instances</p>
                        </div>
                        <div class="text-center p-4 rounded-lg border transition-all" style="border-color: var(--colorNeutralStroke2); background: var(--colorNeutralBackground2);">
                            <p class="text-3xl font-bold mb-2" style="color: #107c10;" id="deployedVEs">2</p>
                            <p class="text-sm" style="color: var(--colorNeutralForeground2);">Deployed VEs</p>
                        </div>
                        <div class="text-center p-4 rounded-lg border transition-all" style="border-color: var(--colorNeutralStroke2); background: var(--colorNeutralBackground2);">
                            <p class="text-3xl font-bold mb-2" style="color: #ca5010;" id="pendingVEs">0</p>
                            <p class="text-sm" style="color: var(--colorNeutralForeground2);">Pending Deployment</p>
                        </div>
                        <div class="text-center p-4 rounded-lg border transition-all" style="border-color: var(--colorNeutralStroke2); background: var(--colorNeutralBackground2);">
                            <p class="text-3xl font-bold mb-2" style="color: var(--colorBrandForeground1);" id="latestVersion">v2.1.234</p>
                            <p class="text-sm" style="color: var(--colorNeutralForeground2);">Latest Version</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Search and Filters -->
            <div class="fluent-card mb-8">
                <div class="p-6">
                    <div class="flex flex-col lg:flex-row lg:items-center justify-between space-y-4 lg:space-y-0">
                        <div class="flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-4">
                            <div class="relative">
                                <i data-feather="search" class="fluent-icon absolute left-2 top-1/2 transform -translate-y-1/2" style="color: var(--colorNeutralForeground3);"></i>
                                <input type="text" 
                                       id="searchInput"
                                       placeholder="Search by VE name..." 
                                       class="fluent-input with-icon w-80"
                                       oninput="performSearch()">
                            </div>
                            <select class="fluent-select" onchange="applyFilters()">
                                <option>All VE Types</option>
                                <option>B Type VE</option>
                                <option>B2 Type VE</option>
                            </select>
                            <select class="fluent-select" onchange="applyFilters()">
                                <option>All Deployment Status</option>
                                <option>Deployed</option>
                                <option>Not Deployed</option>
                                <option>Pending</option>
                            </select>
                            <button onclick="clearSearch()" class="fluent-button fluent-button-subtle">
                                Clear All
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- VE Cards Grid -->
            <div class="fluent-card">
                <div class="p-6" style="border-bottom: 1px solid var(--colorNeutralStroke2);">
                    <div class="flex items-center justify-between">
                        <h2 class="fluent-text-title2">Virtual Environments using this Service</h2>
                        <span class="fluent-badge fluent-badge-info" id="veCount">2 VEs</span>
                    </div>
                </div>

                <div class="p-6">
                    <div id="veCardsGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- SovBase VE Card -->
                        <div class="fluent-card ve-card p-6" onclick="navigateToVEService('SovBase', 'OwaMailB2')">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 rounded-lg flex items-center justify-center" style="background: linear-gradient(135deg, #0f6cbd 0%, #115ea3 100%);">
                                    <i data-feather="server" class="w-6 h-6 text-white"></i>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="ve-badge ve-badge-b-type">B Type</span>
                                    <span class="fluent-badge fluent-badge-success">Active</span>
                                </div>
                            </div>
                            
                            <h3 class="fluent-text-title2 mb-2">SovBase</h3>
                            <p class="fluent-text-body1 mb-4">Base sovereign virtual environment for core services</p>
                            
                            <div class="space-y-3 mb-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm" style="color: var(--colorNeutralForeground2);">Service Status:</span>
                                    <span class="fluent-badge fluent-badge-success">Deployed</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm" style="color: var(--colorNeutralForeground2);">Current Version:</span>
                                    <span class="font-mono text-sm" style="color: var(--colorNeutralForeground1);">v2.1.234</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm" style="color: var(--colorNeutralForeground2);">Last Deploy:</span>
                                    <span class="text-sm" style="color: var(--colorNeutralForeground3);">2 hours ago</span>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between pt-4" style="border-top: 1px solid var(--colorNeutralStroke2);">
                                <span class="fluent-text-body1">Click to manage service</span>
                                <i data-feather="chevron-right" class="fluent-icon" style="color: var(--colorNeutralForeground3);"></i>
                            </div>
                        </div>

                        <!-- OwaMailB2-SOV VE Card -->
                        <div class="fluent-card ve-card p-6" onclick="navigateToVEService('OwaMailB2-SOV', 'OwaMailB2')">
                            <div class="flex items-center justify-between mb-4">
                                <div class="w-12 h-12 rounded-lg flex items-center justify-center" style="background: linear-gradient(135deg, #107c10 0%, #0b5c0a 100%);">
                                    <i data-feather="mail" class="w-6 h-6 text-white"></i>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span class="ve-badge ve-badge-b2-type">B2 Type</span>
                                    <span class="fluent-badge fluent-badge-success">Active</span>
                                </div>
                            </div>
                            
                            <h3 class="fluent-text-title2 mb-2">OwaMailB2-SOV</h3>
                            <p class="fluent-text-body1 mb-4">Specialized B2 sovereign VE for OWA Mail services</p>
                            
                            <div class="space-y-3 mb-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm" style="color: var(--colorNeutralForeground2);">Service Status:</span>
                                    <span class="fluent-badge fluent-badge-success">Deployed</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm" style="color: var(--colorNeutralForeground2);">Current Version:</span>
                                    <span class="font-mono text-sm" style="color: var(--colorNeutralForeground1);">v2.1.234</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm" style="color: var(--colorNeutralForeground2);">Last Deploy:</span>
                                    <span class="text-sm" style="color: var(--colorNeutralForeground3);">1 hour ago</span>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between pt-4" style="border-top: 1px solid var(--colorNeutralStroke2);">
                                <span class="fluent-text-body1">Click to manage service</span>
                                <i data-feather="chevron-right" class="fluent-icon" style="color: var(--colorNeutralForeground3);"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        feather.replace();
        
        // Service data structure
        const serviceData = {
            'OwaMailB2': {
                name: 'OwaMailB2',
                description: 'Outlook Web App Mail Backend Service',
                type: 'Exchange Service',
                icon: 'mail',
                iconColor: '#107c10',
                iconBg: '#dff6dd',
                latestVersion: 'v2.1.234',
                ves: [
                    {
                        name: 'SovBase',
                        type: 'B Type',
                        status: 'deployed',
                        version: 'v2.1.234',
                        lastDeploy: '2 hours ago',
                        icon: 'server',
                        iconBg: 'linear-gradient(135deg, #0f6cbd 0%, #115ea3 100%)'
                    },
                    {
                        name: 'OwaMailB2-SOV',
                        type: 'B2 Type',
                        status: 'deployed',
                        version: 'v2.1.234',
                        lastDeploy: '1 hour ago',
                        icon: 'mail',
                        iconBg: 'linear-gradient(135deg, #107c10 0%, #0b5c0a 100%)'
                    }
                ]
            }
        };
        
        // Get service from URL parameters
        function getServiceFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('service') || 'OwaMailB2';
        }
        
        // Initialize page with service data
        function initializePage() {
            const serviceName = getServiceFromURL();
            const service = serviceData[serviceName];
            
            if (!service) {
                console.error('Service not found:', serviceName);
                return;
            }
            
            // Update service header
            document.getElementById('serviceName').textContent = service.name;
            document.getElementById('serviceTitle').textContent = service.name;
            document.getElementById('serviceDescription').textContent = service.description;
            document.getElementById('serviceType').textContent = service.type;
            document.getElementById('latestVersion').textContent = service.latestVersion;
            
            // Update service icon
            const serviceIcon = document.getElementById('serviceIcon');
            serviceIcon.style.background = service.iconBg;
            serviceIcon.querySelector('i').setAttribute('data-feather', service.icon);
            serviceIcon.querySelector('i').style.color = service.iconColor;
            
            // Update stats
            const totalVEs = service.ves.length;
            const deployedVEs = service.ves.filter(ve => ve.status === 'deployed').length;
            const pendingVEs = service.ves.filter(ve => ve.status === 'pending').length;
            
            document.getElementById('totalVEs').textContent = totalVEs;
            document.getElementById('deployedVEs').textContent = deployedVEs;
            document.getElementById('pendingVEs').textContent = pendingVEs;
            document.getElementById('veCount').textContent = `${totalVEs} VEs`;
            
            feather.replace();
        }
        
        // Navigate to VE Service detail page
        function navigateToVEService(veName, serviceName) {
            window.location.href = `ve-service-detail.html?ve=${veName}&service=${serviceName}`;
        }
        
        // Search functionality
        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase().trim();
            const cards = document.querySelectorAll('.ve-card');
            
            cards.forEach(card => {
                const veName = card.querySelector('h3').textContent.toLowerCase();
                if (searchTerm === '' || veName.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }
        
        // Clear search and filters
        function clearSearch() {
            document.getElementById('searchInput').value = '';
            document.querySelectorAll('select').forEach(select => select.selectedIndex = 0);
            performSearch();
        }
        
        // Apply filters
        function applyFilters() {
            // Filter logic would be implemented here
            performSearch();
        }
        
        // Toggle favorite
        function toggleFavorite() {
            const btn = document.getElementById('favoriteBtn');
            const icon = btn.querySelector('i');
            
            if (icon.classList.contains('fill-current')) {
                icon.classList.remove('fill-current');
                btn.style.color = 'var(--colorNeutralForeground3)';
                btn.title = 'Add to favorites';
                showNotification('Favorites', 'Removed from favorites');
            } else {
                icon.classList.add('fill-current');
                btn.style.color = '#faa06b';
                btn.title = 'Remove from favorites';
                showNotification('Favorites', 'Added to favorites');
            }
        }
        
        // Refresh data
        function refreshData() {
            const btn = event.target.closest('button');
            const icon = btn.querySelector('i');
            
            icon.style.transform = 'rotate(360deg)';
            btn.disabled = true;
            
            setTimeout(() => {
                icon.style.transform = '';
                btn.disabled = false;
                showNotification('Data Refreshed', 'Service data has been updated');
            }, 1500);
        }
        
        // Bulk deploy to all VEs
        function bulkDeploy() {
            const serviceName = getServiceFromURL();
            showNotification('Bulk Deploy Started', `Deploying ${serviceName} to all Virtual Environments...`);
        }
        
        // Show notification
        function showNotification(title, message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 p-4 rounded-lg shadow-lg z-50 bg-blue-500 text-white max-w-sm';
            notification.innerHTML = `<strong>${title}</strong><br>${message}`;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }
        
        // Unified sidebar functionality
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            
            sidebar.classList.toggle('open');
            overlay.classList.toggle('show');
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            
            if (window.innerWidth >= 1024) {
                const sidebar = document.getElementById('sidebar');
                sidebar.classList.add('open');
            }
        });
        
        // Handle window resize
        window.addEventListener('resize', function() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebarOverlay');
            
            if (window.innerWidth >= 1024) {
                sidebar.classList.add('open');
                overlay.classList.remove('show');
            } else {
                sidebar.classList.remove('open');
                overlay.classList.remove('show');
            }
        });
    </script>
</body>
</html>