<!DOCTYPE html><html lang="en"><head>
<meta charset="UTF-8"><title>Services Management</title>
<link rel="stylesheet" href="../shared/styles/common.css">
<link rel="stylesheet" href="../shared/styles/layout.css">
<link rel="stylesheet" href="services-management.css">
</head><body>
<div id="app-header"></div><div id="app-sidebar"></div>
<div class="fluent-main-shell">
  <header class="fluent-content-header">
    <div class="fluent-breadcrumb"><a href="dashboard.html">Home</a><span>Services</span></div>
    <h1>Services</h1>
    <div class="fluent-inline-search">
      <input id="svcSearch" placeholder="Search service..." aria-label="Search Services">
      <select id="svcStatus">
        <option value="">Status (All)</option>
        <option value="ok">OK</option>
        <option value="warn">Warn</option>
        <option value="bad">Bad</option>
      </select>
      <button id="svcClear">Clear</button>
    </div>
  </header>
  <main class="fluent-content">
    <div id="svcGrid" class="fluent-grid-auto"></div>
    <div class="fluent-live-region" aria-live="polite" id="svcLive"></div>
  </main>
</div>
<script src="../shared/js/layout.js"></script>
<script src="../shared/js/mockData.js"></script>
<script src="../shared/js/pageInit.js"></script>
<script>
initPageWithMockData("svc", function(){
  svcSearch.addEventListener("input", render);
  svcStatus.addEventListener("change", render);
  svcClear.onclick=function(){ svcSearch.value=""; svcStatus.value=""; render(); };
  render();
});
function render(){
  var q=svcSearch.value.trim().toLowerCase();
  var st=svcStatus.value;
  var grid=svcGrid;
  grid.innerHTML="";
  var list=Object.keys(MockData.serviceModels).filter(function(n){
    if(q && n.toLowerCase().indexOf(q)===-1) return false;
    if(st && MockData.serviceModels[n].status!==st) return false;
    return true;
  }).sort();
  if(list.length===0){ grid.innerHTML='<div class="fluent-empty" style="grid-column:1 / -1;">No services</div>'; announce("No services"); return; }
  list.forEach(function(s){
    grid.appendChild(card(s));
  });
  announce(list.length+" services");
}
function card(s){
  var m=MockData.serviceModels[s]; var meta=MockData.servicesDetails[s]||{};
  var c=document.createElement("div");
  c.className="fluent-card fluent-svc-card";
  var fave=MockData.isFavoriteService(s);
  c.innerHTML='<div class="fluent-svc-head">'+
      '<button class="fluent-favorite-toggle" aria-pressed="'+fave+'" aria-label="Favorite '+s+'" data-svc="'+s+'">★</button>'+
      '<a class="fluent-svc-name" href="service-detail.html?service='+encodeURIComponent(s)+'">'+s+'</a>'+
      '<span class="fluent-chip">'+(m.status||"ok")+'</span>'+
    '</div>'+
    '<div class="fluent-svc-meta">'+short(meta.BuildType)+' • '+(meta.PpeVeName||"—")+'</div>'+
    '<div class="fluent-svc-pipelines">'+ pipelines(m) +'</div>'+
    '<div class="fluent-svc-footer">v'+m.version+' '+(m.activeDeploy?'<span class="fluent-badge accent">Deploying</span>':'')+'</div>';
  c.querySelector(".fluent-favorite-toggle").onclick=function(){
    toggleFavoriteService(s);
    this.setAttribute("aria-pressed",""+MockData.isFavoriteService(s));
  };
  return c;
}
function pipelines(m){
  return m.pipelines.map(function(p){ return '<span class="fluent-badge">'+p.type+'</span>'; }).join(' ');
}
function short(t){ return t||"—"; }
function announce(msg){ svcLive.textContent=msg; }
</script>
</body></html>
