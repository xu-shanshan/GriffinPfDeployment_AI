<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Deployment History</title>
  <link rel="stylesheet" href="../shared/styles/common.css">
  <link rel="stylesheet" href="../shared/styles/layout.css">
  <link rel="stylesheet" href="deployments-history.css">
</head>
<body>
<div class="fluent-layout">
  <div id="app-sidebar"></div>
  <div class="fluent-content">
    <div id="app-header"></div>
    <div class="fluent-main">
      <h1 class="fluent-section-title">Deployment History</h1>
      <table class="fluent-table">
        <thead>
          <tr><th>ID</th><th>Time (UTC)</th><th>User</th><th>VE</th><th>Services</th><th>Status</th></tr>
        </thead>
        <tbody id="dep-body"></tbody>
      </table>
    </div>
  </div>
</div>
<script src="../shared/js/mockData.js"></script>
<script src="../shared/js/layout.js"></script>
<script>
injectSidebar("deployments-history.html");
injectHeader();

function render(){
  var body = document.getElementById("dep-body");
  var html="";
  for(var i=mockDeployments.length-1;i>=0;i--){
    var d = mockDeployments[i];
    var statusCls = "fluent-status-"+ d.status.toLowerCase();
    html += '<tr>' +
      '<td>'+ d.id +'</td>' +
      '<td>'+ d.timestamp +'</td>' +
      '<td>'+ d.user +'</td>' +
      '<td>'+ (d.scope.ve || "") +'</td>' +
      '<td>'+ (d.scope.services||[]).join(", ") +'</td>' +
      '<td class="'+ statusCls +'">'+ d.status +'</td>' +
    '</tr>';
  }
  body.innerHTML = html || '<tr><td colspan="6" class="fluent-empty">No deployments</td></tr>';
}
render();
</script>
</body>
</html>
