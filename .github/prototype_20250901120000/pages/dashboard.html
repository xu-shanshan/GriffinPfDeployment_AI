<!-- filepath: c:\src\gitXxtq\GriffinPfDeployment_AI\.github\prototype_20250901120000\pages\dashboard.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dashboard | Prototype</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/feather-icons"></script>
  <link rel="stylesheet" href="../shared/styles/theme.css">
  <link rel="stylesheet" href="../shared/styles/layout.css">
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <!-- REPLACED inline sidebar/header with placeholders -->
  <div id="app-sidebar"></div>
  <div id="app-header"></div>
  <div class="main-content" id="mainContent">
    <div class="web-container" style="padding-top:32px;padding-bottom:48px;">
      <section class="grid-auto" id="statGrid" aria-label="Key statistics"></section>
      <section style="margin-top:32px;">
        <h2 class="fluent-text-title2" style="margin:0 0 16px;">Recent Favorites</h2>
        <div class="grid-auto" id="favoriteGrid"></div>
      </section>
    </div>
  </div>
  <!-- REMOVE old fetch scripts; keep data utilities -->
  <script src="../shared/js/mockData.js"></script>
  <script src="../shared/js/utils.js"></script>
  <script src="../shared/js/layout.js"></script>
  <script>
    injectSidebar({ active:'dashboard' });
    injectHeader({ title:'Dashboard', subtitle:'Environment Overview', user:{ name:'Alice Admin'} });
  </script>
  <script>
    function statCard(cfg){
      return `<div class="fluent-card stat-card" data-nav="${cfg.link||''}">
        <div class="flex justify-between items-center">
          <div>
            <div class="fluent-text-caption1">${cfg.label}</div>
            <div style="font-size:28px;font-weight:600;color:var(--colorNeutralForeground1);">${cfg.value}</div>
          </div>
          <div class="fluent-badge fluent-badge-success" style="background:#e3f2fd;color:var(--colorBrandForeground1);">${cfg.tag}</div>
        </div>
      </div>`;
    }
    function favoriteCard(item){
      return `<div class="fluent-card" style="display:flex;flex-direction:column;gap:8px;">
        <div class="flex justify-between">
          <strong style="color:var(--colorNeutralForeground1);">${item.name}</strong>
          <span class="fluent-badge">${item.type}</span>
        </div>
        <div class="fluent-text-caption1">${item.detail}</div>
      </div>`;
    }

    function init(data){
      const statHost=document.getElementById('statGrid');
      statHost.innerHTML = [
        { label:'Total VEs', value:data.allVEs.length, tag:'VE', link:'ve-management.html'},
        { label:'Services', value:data.allServices.length, tag:'SVC', link:'services-management.html'},
        { label:'Active Pipelines', value:data.serviceCards.reduce((a,c)=>a+(c.favorite?c.pipelines?c.pipelines.length:1:0),0)||data.serviceCards.length, tag:'PIPE' }
      ].map(statCard).join('');
      const favHost=document.getElementById('favoriteGrid');
      const favVEs = (data.favorites.VEs||[]).slice(0,3).map(n=>({ name:n, type:'VE', detail:'Favorite VE' }));
      const favSvcs = (data.favorites.Services||[]).slice(0,3).map(n=>({ name:n, type:'Service', detail:'Favorite service' }));
      favHost.innerHTML = favVEs.concat(favSvcs).map(favoriteCard).join('');
      document.body.addEventListener('click',e=>{
        const c=e.target.closest('.stat-card[data-nav]');
        if(c && c.dataset.nav) location.href=c.dataset.nav;
      });
      if(window.refreshFeatherIcons) window.refreshFeatherIcons();
    }
    initPageWithMockData(init);
  </script>
</body>
</html>